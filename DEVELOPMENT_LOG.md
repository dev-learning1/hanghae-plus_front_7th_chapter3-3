# ê°œë°œ ë¡œê·¸

## í™”ë©´ ê¸°ëŠ¥ ë™ì‘ ë²”ìœ„
### origin src
í—¤ë”ì— ìˆëŠ” [í™ˆ, ëŒ€ì‹œë³´ë“œ, ì„¤ì •] ë²„íŠ¼ ê¸°ëŠ¥ ì—†ìŒ
ê²Œì‹œë¬¼ ì¶”ê°€ ê°€ëŠ¥: ê²Œì‹œë¬¼ ëª©ë¡ ìµœìƒë‹¨ì— ë…¸ì¶œ
ê²€ìƒ‰í•˜ë©´ ëª©ë¡ì—ì„œ ê²€ìƒ‰ê°’ì´ ìˆëŠ” ê²Œì‹œë¬¼ë§Œ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í˜„ì¬ ë…¸ì¶œëœ ê²Œì‹œë¬¼ì˜ ì œëª©ì— ê²€ìƒ‰ê°’ì´ í•˜ì´ë¼ì´íŠ¸ ë¨: ë¡œë§ë˜ëŠ” í™”ë©´ì—†ì´ ë³€í™”(í•˜ì´ë¼ì´íŠ¸)ë˜ê¸° ì „ í™”ë©´ì—ì„œ ë©ˆì¶°ìˆë‹¤ê°€ ê²€ìƒ‰ê°’ì„ ì°¾ìœ¼ë©´ í•˜ì´ë¼ì´íŠ¸ ë¨
íƒœê·¸ ì„ íƒ ì˜µì…˜ ê°€ëŠ¥: ì„ íƒí•œ íƒœê·¸ê°€ ìˆëŠ” ê²Œì‹œë¬¼ë§Œ ë…¸ì¶œ
ì •ë ¬ ê¸°ì¤€ ì˜µì…˜ ì•ˆë¨: ID, ì œëª©, ë°˜ì‘ ì˜µì…˜ì„ ëˆŒëŸ¬ë„ ë°˜ì‘ ì—†ìŒ
ì˜¤ë¦„ì°¨ìˆœ/ë‚´ë¦¼ì°¨ìˆœ ì˜µì…˜ ì•ˆë¨: ë°˜ì‘ ì—†ìŒ

ê²Œì‹œë¬¼ í…Œì´ë¸” ê¸°ëŠ¥ ì¤‘...
ë°˜ì‘: READ ONLY
ì‘ì—… ë‚´, ëŒ“ê¸€/ìˆ˜ì •/ì‚­ì œ ëª¨ë‘ ê°€ëŠ¥

í•˜ë‹¨ì— ê²Œì‹œë¬¼ ë…¸ì¶œ ê°œìˆ˜ì™€ í˜ì´ì§€ë„¤ì´ì…˜ ëª¨ë‘ ê°€ëŠ¥

### 1ì°¨ ìˆ˜ì •ëœ src
| origin src ê¸°ëŠ¥ì—ì„œ ì•ˆë˜ëŠ” ê²ƒê³¼ ë°”ë€ ê¸°ëŠ¥ë§Œ ì‘ì„±
ê²Œì‹œë¬¼ ì¶”ê°€ ê°€ëŠ¥ ì•ˆë¨:
  ê²Œì‹œë¬¼ ì¶”ê°€ê°€ ëœ í›„ ë‹¤ì‹œ ìƒˆë¡œê³ ì¹¨ì„ í•¨(ì•„ë˜ ë‘ api ì‹¤í–‰)
    Request URL
    http://localhost:5174/api/posts?limit=10&skip=0
    Request Method
    GET
    Status Code
    304 Not Modified
    Remote Address
    [::1]:5174
    Referrer Policy
    strict-origin-when-cross-origin

    Request URL
    http://localhost:5174/api/users?limit=0&select=username,image
    Request Method
    GET
    Status Code
    304 Not Modified
    Remote Address
    [::1]:5174
    Referrer Policy
    strict-origin-when-cross-origin
ê²€ìƒ‰ í•  ë•Œ, ê²Œì‹œë¬¼ ëª©ë¡ì— ë…¸ì¶œë˜ëŠ” ê²ƒì€ ë™ì¼. í•˜ì§€ë§Œ ê²€ìƒ‰ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ ë¡œë”©í™”ë©´ì´ ë‚˜ì˜´. ì´ì „ì— ì…ë ¥í–ˆì—ˆë˜ ê²€ìƒ‰ê°’ì„ ì…ë ¥í•˜ë©´ ê·¸ë•ŒëŠ” ë¡œë”©í™”ë©´ ì—†ì´ ë°”ë¡œ ë°˜ì‘í•¨

ê²Œì‹œë¬¼ í…Œì´ë¸” ê¸°ëŠ¥ ì¤‘...
ì‘ì—… ë‚´, ëŒ“ê¸€/ìˆ˜ì •/ì‚­ì œ ëª¨ë‘ ì•ˆë¨: ê²Œì‹œë¬¼ ì¶”ê°€ ê¸°ëŠ¥ì˜ ì´ìŠˆì™€ ë™ì¼. ê·¸ë˜ì„œ ìˆ˜ì •í•œ í›„ í™”ë©´ì€ ì•ˆë°”ë€Œì—ˆì§€ë§Œ ë‹¤ì‹œ ìˆ˜ì •ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìˆ˜ì •ëœ ë‚´ìš©ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

### 2ì°¨ ìˆ˜ì •ëœ src
| 1ì°¨ ìˆ˜ì •ëœ src ê¸°ëŠ¥ì—ì„œ ì•ˆë˜ëŠ” ê²ƒ ìˆ˜ì • ë° ì¶”ê°€ ê¸°ëŠ¥
ê²Œì‹œë¬¼ ì¶”ê°€ ì´ìŠˆ ì²˜ë¦¬

ê²Œì‹œë¬¼ í…Œì´ë¸” ê¸°ëŠ¥ ì¤‘...
ì‘ì—… ë‚´, ëŒ“ê¸€/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥ ì´ìŠˆ ì²˜ë¦¬

ì¶”ê°€ëœ ê¸°ëŠ¥
ê²Œì‹œë¬¼ like/dislike ë°˜ì‘ ê¸°ëŠ¥ ì¶”ê°€

## 2025-12-12: FSD ì•„í‚¤í…ì²˜ ì ìš© ë° TanStack Query, Jotai ë„ì…

### ğŸ“ ë³€ê²½ ê°œìš”
ê²Œì‹œë¬¼ ê´€ë¦¬ Admin ì½”ë“œë¥¼ FSD(Feature-Sliced Design) ì•„í‚¤í…ì²˜ë¡œ ë¦¬íŒ©í† ë§í•˜ê³ , ì „ì—­ ìƒíƒœ ê´€ë¦¬(Jotai)ì™€ ì„œë²„ ìƒíƒœ ê´€ë¦¬(TanStack Query)ë¥¼ ë„ì…í•˜ì—¬ ì½”ë“œì˜ êµ¬ì¡°í™”ì™€ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

### ğŸ¯ ìˆ˜ì •í•œ ì´ìœ 
1. **ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„**: ê¸°ì¡´ PostsManagerPageê°€ 700ì¤„ì´ ë„˜ëŠ” ë‹¨ì¼ íŒŒì¼ë¡œ ë˜ì–´ ìˆì–´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›€
2. **íƒ€ì… ì•ˆì •ì„±**: TypeScriptë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ íƒ€ì… ì²˜ë¦¬ê°€ ë¶€ì‹¤í•˜ì—¬ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ê°€ëŠ¥ì„± ì¡´ì¬
3. **ìƒíƒœ ê´€ë¦¬ í˜¼ë€**: ìƒíƒœ ê´€ë¦¬ ê°œë… ì—†ì´ ë„ˆë¬´ ë§ì€ useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ì¶”ì ì´ ì–´ë ¤ì›€
4. **useEffect ë‚¨ìš©**: ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ì´ ë³µì¡í•˜ê²Œ êµ¬ì„±ë˜ì–´ ìˆê³  useEffect ê´€ë¦¬ê°€ ì•ˆ ë¨
5. **ê´€ì‹¬ì‚¬ ë¯¸ë¶„ë¦¬**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, UI, API í˜¸ì¶œì´ í•œ ê³³ì— ì„ì—¬ ìˆì–´ ì¬ì‚¬ìš©ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ì €í•˜

### ğŸ”§ ìˆ˜ì • ë‚´ìš©

#### 1. í”„ë¡œì íŠ¸ êµ¬ì¡° ë³€ê²½ (FSD ì•„í‚¤í…ì²˜ ì ìš©)

**ë³€ê²½ ì „**:
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â””â”€â”€ index.tsx (ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸)
â””â”€â”€ pages/
    â””â”€â”€ PostsManagerPage.tsx (700+ ì¤„)
```

**ë³€ê²½ í›„**:
```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ providers/
â”‚       â””â”€â”€ QueryProvider.tsx
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ posts-manager/
â”‚       â””â”€â”€ ui/
â”‚           â””â”€â”€ PostsManagerPage.tsx
â”œâ”€â”€ widgets/
â”‚   â”œâ”€â”€ post-table/ui/PostTable.tsx
â”‚   â”œâ”€â”€ post-detail/ui/PostDetail.tsx
â”‚   â””â”€â”€ user-modal/ui/UserModal.tsx
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ post-add/ui/PostAddDialog.tsx
â”‚   â”œâ”€â”€ post-edit/ui/PostEditDialog.tsx
â”‚   â”œâ”€â”€ post-search/
â”‚   â”‚   â”œâ”€â”€ model/store.ts
â”‚   â”‚   â””â”€â”€ ui/PostSearchBar.tsx
â”‚   â”œâ”€â”€ comment-add/ui/CommentAddDialog.tsx
â”‚   â””â”€â”€ comment-edit/ui/CommentEditDialog.tsx
â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ post/
â”‚   â”‚   â”œâ”€â”€ api/index.ts
â”‚   â”‚   â”œâ”€â”€ model/usePost.ts
â”‚   â”‚   â””â”€â”€ ui/PostCard.tsx
â”‚   â”œâ”€â”€ comment/
â”‚   â”‚   â”œâ”€â”€ api/index.ts
â”‚   â”‚   â”œâ”€â”€ model/useComment.ts
â”‚   â”‚   â””â”€â”€ ui/CommentItem.tsx
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ api/index.ts
â”‚   â”‚   â””â”€â”€ model/useUser.ts
â”‚   â””â”€â”€ tag/
â”‚       â”œâ”€â”€ api/index.ts
â”‚       â””â”€â”€ model/useTag.ts
â””â”€â”€ shared/
    â”œâ”€â”€ api/client.ts
    â”œâ”€â”€ lib/highlight.tsx
    â”œâ”€â”€ types/index.ts
    â””â”€â”€ ui/
        â”œâ”€â”€ index.tsx (ê³µí†µ UI ì»´í¬ë„ŒíŠ¸)
        â”œâ”€â”€ Header.tsx
        â””â”€â”€ Footer.tsx
```

#### 2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€

**ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€**:
```bash
pnpm add jotai @tanstack/react-query
pnpm add -D @types/node
```

- **jotai**: ì „ì—­ ìƒíƒœ ê´€ë¦¬ (ê²€ìƒ‰ì–´, í•„í„°, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜)
- **@tanstack/react-query**: ì„œë²„ ìƒíƒœ ê´€ë¦¬ (API í˜¸ì¶œ, ìºì‹±, ë™ê¸°í™”)
- **@types/node**: path ëª¨ë“ˆ íƒ€ì… ì •ì˜

#### 3. shared ë ˆì´ì–´ êµ¬í˜„

**src/shared/types/index.ts** (ì‹ ê·œ):
```typescript
// ì—”í‹°í‹°ë³„ íƒ€ì… ì •ì˜
export interface User { ... }
export interface Post { ... }
export interface Comment { ... }
export interface Tag { ... }

// DTO íƒ€ì… ì •ì˜
export interface CreatePostDto { ... }
export interface UpdatePostDto { ... }
```

**src/shared/api/client.ts** (ì‹ ê·œ):
```typescript
export const apiClient = {
  async get<T>(url: string): Promise<T> { ... },
  async post<T>(url: string, data: unknown): Promise<T> { ... },
  async put<T>(url: string, data: unknown): Promise<T> { ... },
  async patch<T>(url: string, data: unknown): Promise<T> { ... },
  async delete(url: string): Promise<void> { ... },
}
```

**src/shared/lib/highlight.tsx** (ì‹ ê·œ):
- ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ì„ ê³µí†µ ìœ í‹¸ë¡œ ë¶„ë¦¬

**src/shared/ui/index.tsx**:
- ê¸°ì¡´ components/index.tsxë¥¼ TypeScript íƒ€ì…ê³¼ í•¨ê»˜ ê°œì„ 
- Button, Input, Card, Table, Dialog, Select ë“± ê³µí†µ UI ì»´í¬ë„ŒíŠ¸

#### 4. entities ë ˆì´ì–´ êµ¬í˜„

ê° ì—”í‹°í‹°(Post, Comment, User, Tag)ë³„ë¡œ api, model, ui ë¶„ë¦¬:

**Post Entity ì˜ˆì‹œ**:
```typescript
// entities/post/api/index.ts
export const postApi = {
  async getPosts(params): Promise<PostsResponse> { ... },
  async searchPosts(query: string): Promise<PostsResponse> { ... },
  async getPostsByTag(tag: string): Promise<PostsResponse> { ... },
  async createPost(data: CreatePostDto): Promise<Post> { ... },
  async updatePost(id: number, data: UpdatePostDto): Promise<Post> { ... },
  async deletePost(id: number): Promise<void> { ... },
}

// entities/post/model/usePost.ts
export const useQueryPosts = (params) => useQuery({ ... })
export const useQueryPostsSearch = (query) => useQuery({ ... })
export const useQueryPostsByTag = (tag) => useQuery({ ... })
export const useMutationPostAdd = () => useMutation({ ... })
export const useMutationPostUpdate = () => useMutation({ ... })
export const useMutationPostDelete = () => useMutation({ ... })
```

#### 5. features ë ˆì´ì–´ êµ¬í˜„

ì‚¬ìš©ì í–‰ë™(ì´ë²¤íŠ¸ ì²˜ë¦¬) ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ë¦¬:

**features/post-search/model/store.ts** (ì‹ ê·œ):
```typescript
import { atom } from "jotai"

export const searchQueryAtom = atom<string>("")
export const selectedTagAtom = atom<string>("")
export const sortByAtom = atom<string>("")
export const sortOrderAtom = atom<"asc" | "desc">("asc")
export const paginationAtom = atom({ skip: 0, limit: 10 })
```

- PostAddDialog: ê²Œì‹œë¬¼ ì¶”ê°€ ê¸°ëŠ¥
- PostEditDialog: ê²Œì‹œë¬¼ ìˆ˜ì • ê¸°ëŠ¥
- PostSearchBar: ê²€ìƒ‰ ê¸°ëŠ¥
- CommentAddDialog: ëŒ“ê¸€ ì¶”ê°€ ê¸°ëŠ¥
- CommentEditDialog: ëŒ“ê¸€ ìˆ˜ì • ê¸°ëŠ¥

#### 6. widgets ë ˆì´ì–´ êµ¬í˜„

ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë³µì¡í•œ UI ë¸”ë¡:

- **PostTable**: ê²Œì‹œë¬¼ ëª©ë¡ í…Œì´ë¸” (ê²Œì‹œë¬¼ ì¹´ë“œ, í¸ì§‘/ì‚­ì œ ë²„íŠ¼ í¬í•¨)
- **PostDetail**: ê²Œì‹œë¬¼ ìƒì„¸ ë° ëŒ“ê¸€ ëª©ë¡
- **UserModal**: ì‚¬ìš©ì ì •ë³´ ëª¨ë‹¬

#### 7. pages ë ˆì´ì–´ êµ¬í˜„

**src/pages/posts-manager/ui/PostsManagerPage.tsx**:

**ë³€ê²½ ì „**: 700+ ì¤„ì˜ ë‹¨ì¼ íŒŒì¼
**ë³€ê²½ í›„**: 230ì¤„ë¡œ ì¶•ì†Œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ê° ë ˆì´ì–´ë¡œ ë¶„ë¦¬

```typescript
const PostsManagerPage = () => {
  // Jotai atoms ì‚¬ìš©
  const [searchQuery, setSearchQuery] = useAtom(searchQueryAtom)
  const [selectedTag, setSelectedTag] = useAtom(selectedTagAtom)

  // TanStack Query hooks ì‚¬ìš©
  const { data: tagsData } = useQueryTags()
  const { data: postsData, isLoading } = useQueryPosts({ ...pagination })

  // ìœ„ì ¯ ì¡°í•©
  return (
    <Card>
      <PostSearchBar onSearch={handleSearch} />
      <PostTable posts={posts} ... />
      <PostDetail post={selectedPost} ... />
      <UserModal userId={selectedUserId} ... />
    </Card>
  )
}
```

#### 8. app ë ˆì´ì–´ êµ¬í˜„

**src/app/providers/QueryProvider.tsx** (ì‹ ê·œ):
```typescript
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: 1,
      refetchOnWindowFocus: false,
      staleTime: 60 * 1000, // 1ë¶„
    },
  },
})

export const QueryProvider = ({ children }) => (
  <QueryClientProvider client={queryClient}>
    {children}
  </QueryClientProvider>
)
```

**src/App.tsx** ìˆ˜ì •:
```typescript
const App = () => (
  <QueryProvider>
    <Router>
      <Header />
      <PostsManagerPage />
      <Footer />
    </Router>
  </QueryProvider>
)
```

#### 9. ì„¤ì • íŒŒì¼ ìˆ˜ì •

**tsconfig.app.json**:
```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src", "vite-env.d.ts"]
}
```

**vite.config.ts**:
```typescript
import path from "path"

export default defineConfig({
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
})
```

**vite-env.d.ts**:
```typescript
declare module "*.css" {
  const content: Record<string, string>
  export default content
}
```

### âœ… ì¥ì 

1. **ì½”ë“œ ê°€ë…ì„± í–¥ìƒ**
   - 700ì¤„ ë‹¨ì¼ íŒŒì¼ â†’ ì—­í• ë³„ë¡œ ë¶„ë¦¬ëœ ì‘ì€ íŒŒì¼ë“¤
   - ê° íŒŒì¼ì´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì¤€ìˆ˜

2. **ì¬ì‚¬ìš©ì„± ì¦ê°€**
   - ê³µí†µ UI ì»´í¬ë„ŒíŠ¸ë¥¼ shared/uië¡œ ë¶„ë¦¬
   - entities, features, widgetsë¥¼ ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë„ ì¬ì‚¬ìš© ê°€ëŠ¥

3. **íƒ€ì… ì•ˆì •ì„± í™•ë³´**
   - ëª¨ë“  ì—”í‹°í‹°ì— ëŒ€í•œ íƒ€ì… ì •ì˜
   - API ì‘ë‹µ íƒ€ì… ëª…ì‹œë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ê°ì†Œ

4. **ìƒíƒœ ê´€ë¦¬ ê°œì„ **
   - Jotaië¡œ ì „ì—­ ìƒíƒœ ê´€ë¦¬ (ê²€ìƒ‰, í•„í„°, ì •ë ¬)
   - TanStack Queryë¡œ ì„œë²„ ìƒíƒœ ê´€ë¦¬ (ìºì‹±, ë¦¬í˜ì¹­, ë‚™ê´€ì  ì—…ë°ì´íŠ¸)
   - useEffect ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°

5. **ë¹„ë™ê¸° ì²˜ë¦¬ ê°„ì†Œí™”**
   - useQuery/useMutationìœ¼ë¡œ ì„ ì–¸ì  ë¹„ë™ê¸° ì²˜ë¦¬
   - ë¡œë”©, ì—ëŸ¬ ìƒíƒœ ìë™ ê´€ë¦¬
   - ì¤‘ë³µ API í˜¸ì¶œ ë°©ì§€ (ìºì‹±)

6. **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**
   - ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ë¡œ ìˆ˜ì • ì˜í–¥ ë²”ìœ„ ìµœì†Œí™”
   - ê° ë ˆì´ì–´ì˜ ì—­í• ì´ ëª…í™•í•´ ë””ë²„ê¹… ìš©ì´

7. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**
   - ê° ë ˆì´ì–´ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
   - Mock ë°ì´í„° ì£¼ì…ì´ ì‰¬ì›€

### âš ï¸ ë‹¨ì  ë° ê³ ë ¤ì‚¬í•­

1. **ì´ˆê¸° í•™ìŠµ ê³¡ì„ **
   - FSD ì•„í‚¤í…ì²˜ ì´í•´ í•„ìš”
   - TanStack Query, Jotai í•™ìŠµ í•„ìš”
   - í´ë” êµ¬ì¡°ê°€ ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆìŒ

2. **íŒŒì¼ ìˆ˜ ì¦ê°€**
   - ë‹¨ì¼ íŒŒì¼ â†’ 50+ íŒŒì¼ë¡œ ì¦ê°€
   - ì‘ì€ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì˜¤íˆë ¤ ë³µì¡ë„ ì¦ê°€ ê°€ëŠ¥

3. **ë²ˆë“¤ í¬ê¸° ì¦ê°€**
   - @tanstack/react-query: ~50KB
   - jotai: ~5KB
   - ì´ ~55KB ì¦ê°€

4. **ë§ˆì´ê·¸ë ˆì´ì…˜ ë¹„ìš©**
   - ê¸°ì¡´ ì½”ë“œë¥¼ ì™„ì „íˆ ì¬ì‘ì„±
   - ê¸°ì¡´ ì‚¬ìš©ì²˜ê°€ ìˆë‹¤ë©´ breaking change ë°œìƒ

### ğŸ› ë°œìƒ ê°€ëŠ¥í•œ ì´ìŠˆ

#### Issue 1: TypeScript ë¹Œë“œ ì—ëŸ¬ (index.css íƒ€ì… ì„ ì–¸ ëˆ„ë½)
**ì›ì¸**:
- tscê°€ index.cssì˜ íƒ€ì… ì„ ì–¸ì„ ì°¾ì§€ ëª»í•´ ì‹¤íŒ¨
- tsconfig.app.jsonì˜ includeì— vite-env.d.tsê°€ ë¹ ì ¸ ìˆì–´ *.css ëª¨ë“ˆ ì„ ì–¸ì„ ëª» ì½ìŒ

**í•´ê²°ë°©ë²•**:
```json
// tsconfig.app.json
{
  "include": ["src", "vite-env.d.ts"]
}
```

```typescript
// vite-env.d.ts
declare module "*.css" {
  const content: Record<string, string>
  export default content
}
```

#### Issue 2: Query Key ì¤‘ë³µìœ¼ë¡œ ì¸í•œ ìºì‹œ ì¶©ëŒ
**ì›ì¸**:
- ë™ì¼í•œ queryKeyë¥¼ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©
- ì˜ˆ: `['posts']`ë¥¼ ê²€ìƒ‰, íƒœê·¸ í•„í„°, ì¼ë°˜ ì¡°íšŒì— ëª¨ë‘ ì‚¬ìš©

**í•´ê²°ë°©ë²•**:
```typescript
// êµ¬ì²´ì ì¸ queryKey ì‚¬ìš©
useQuery({ queryKey: ['posts', 'search', query] })
useQuery({ queryKey: ['posts', 'tag', tag] })
useQuery({ queryKey: ['posts', limit, skip] })
```

#### Issue 3: Atom ì´ˆê¸°í™” íƒ€ì´ë° ë¬¸ì œ
**ì›ì¸**:
- URL íŒŒë¼ë¯¸í„°ì—ì„œ ì´ˆê¸°ê°’ì„ ì½ì–´ì•¼ í•˜ëŠ”ë° atomì´ ë¨¼ì € ì´ˆê¸°í™”ë¨

**í•´ê²°ë°©ë²•**:
```typescript
// useEffectì—ì„œ URL íŒŒë¼ë¯¸í„° ë™ê¸°í™”
useEffect(() => {
  const params = new URLSearchParams(location.search)
  setSearchQuery(params.get("search") || "")
  setSelectedTag(params.get("tag") || "")
}, [location.search])
```

### ğŸ” í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ê²Œì‹œë¬¼ ëª©ë¡ ì •ìƒ ë¡œë“œ
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] íƒœê·¸ í•„í„°ë§ ì •ìƒ ë™ì‘
- [ ] ì •ë ¬ ê¸°ëŠ¥ (ID, ì œëª©, ë°˜ì‘) ì •ìƒ ë™ì‘
- [ ] í˜ì´ì§€ë„¤ì´ì…˜ (ì´ì „/ë‹¤ìŒ) ì •ìƒ ë™ì‘
- [ ] ê²Œì‹œë¬¼ ì¶”ê°€ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ê²Œì‹œë¬¼ ìˆ˜ì • ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ê²Œì‹œë¬¼ ì‚­ì œ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ê²Œì‹œë¬¼ ìƒì„¸ ë³´ê¸° ë° ëŒ“ê¸€ ëª©ë¡ í‘œì‹œ
- [ ] ëŒ“ê¸€ ì¶”ê°€ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ëŒ“ê¸€ ìˆ˜ì • ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ëŒ“ê¸€ ì‚­ì œ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ëŒ“ê¸€ ì¢‹ì•„ìš” ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- [ ] ì‚¬ìš©ì ì •ë³´ ëª¨ë‹¬ ì •ìƒ í‘œì‹œ
- [ ] URL íŒŒë¼ë¯¸í„° ë™ê¸°í™” ì •ìƒ ë™ì‘
- [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì •ìƒ ë™ì‘

### ğŸ“š ì°¸ê³  ìë£Œ

- **FSD ì•„í‚¤í…ì²˜ ê³µì‹ ë¬¸ì„œ**: https://feature-sliced.design/
- **TanStack Query ë¬¸ì„œ**: https://tanstack.com/query/latest
- **Jotai ë¬¸ì„œ**: https://jotai.org/
- **ê³¼ì œ ê°€ì´ë“œ**: `8ì£¼ì°¨_ê³¼ì œ_FSD_ì„¤ê³„.md`

**ì£¼ìš” íŒŒì¼ ê²½ë¡œ**:
- í”„ë¡œì íŠ¸ ì„¤ì •:
  - `tsconfig.app.json` (18-20ì¤„: path aliases)
  - `vite.config.ts` (8-12ì¤„: path aliases)
  - `vite-env.d.ts` (3-6ì¤„: CSS íƒ€ì… ì„ ì–¸)

- App ë ˆì´ì–´:
  - `src/app/providers/QueryProvider.tsx`
  - `src/App.tsx`

- Shared ë ˆì´ì–´:
  - `src/shared/types/index.ts`
  - `src/shared/api/client.ts`
  - `src/shared/lib/highlight.tsx`
  - `src/shared/ui/index.tsx`

- Entities ë ˆì´ì–´:
  - `src/entities/post/api/index.ts`
  - `src/entities/post/model/usePost.ts`
  - `src/entities/comment/api/index.ts`
  - `src/entities/comment/model/useComment.ts`

- Features ë ˆì´ì–´:
  - `src/features/post-search/model/store.ts`
  - `src/features/post-add/ui/PostAddDialog.tsx`
  - `src/features/post-edit/ui/PostEditDialog.tsx`

- Widgets ë ˆì´ì–´:
  - `src/widgets/post-table/ui/PostTable.tsx`
  - `src/widgets/post-detail/ui/PostDetail.tsx`
  - `src/widgets/user-modal/ui/UserModal.tsx`

- Pages ë ˆì´ì–´:
  - `src/pages/posts-manager/ui/PostsManagerPage.tsx`

### ğŸ”„ í›„ì† ì‘ì—…

- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (Vitest)
- [ ] E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì¶”ê°€
- [ ] ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ UI ê°œì„ 
- [ ] ë¬´í•œ ìŠ¤í¬ë¡¤ ì ìš© ê²€í† 
- [ ] React Query DevTools ì¶”ê°€
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
- [ ] Storybook ì„¤ì • ë° ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™”
- [ ] ì ‘ê·¼ì„±(a11y) ê°œì„ 
- [ ] ë‹¤í¬ ëª¨ë“œ ì§€ì›

---

## 2025-12-13: React Query ìºì‹œ ì²˜ë¦¬ ë° ëŒ“ê¸€ ê¸°ëŠ¥ ê°œì„ 

### ğŸ“ ë³€ê²½ ê°œìš”
React Queryë¥¼ ì‚¬ìš©í•œ ëŒ“ê¸€ ê´€ë ¨ API ì²˜ë¦¬ ë°©ì‹ê³¼ UI ë°˜ì‘ ë¬¸ì œë¥¼ ê°œì„ í–ˆìŠµë‹ˆë‹¤.  
`invalidateQueries` ëŒ€ì‹  `setQueryData`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹œë¥¼ ì§ì ‘ ê°±ì‹ í•˜ê³ , ëŒ“ê¸€ ì¢‹ì•„ìš”ëŠ” ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ì—¬ UIë¥¼ ì¦‰ì‹œ ë°˜ì˜í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

### ğŸ¯ ìˆ˜ì •í•œ ì´ìœ 
1. **UI ì¦‰ì‹œ ë°˜ì˜ í•„ìš”**: ê¸°ì¡´ `invalidateQueries` ì‚¬ìš© ì‹œ mock ë°ì´í„° í™˜ê²½ì—ì„œ ì „ì²´ ì¬ìš”ì²­ ë°œìƒ, UIê°€ ì›ë˜ ë°ì´í„°ë¡œ ëŒì•„ê°€ê±°ë‚˜ ë°˜ì˜ë˜ì§€ ì•ŠìŒ.
2. **ì¢‹ì•„ìš” ê¸°ëŠ¥ ë¬¸ì œ**: ì„œë²„ mock í™˜ê²½ì—ì„œ `onSuccess` ê¸°ë°˜ ì—…ë°ì´íŠ¸ëŠ” payload ì¤‘ë³µ ì¦ê°€ í˜¹ì€ í™”ë©´ ë°˜ì˜ ë¶ˆê°€.
3. **ì¼ê´€ëœ ìºì‹œ ê´€ë¦¬**: ëŒ“ê¸€ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ/ì¢‹ì•„ìš” ëª¨ë‘ ìºì‹œë¥¼ ì§ì ‘ ê°±ì‹ í•˜ì—¬ ë°ì´í„° ì‹ ë¢°ì„±ì„ ë†’ì„.

### ğŸ”§ ìˆ˜ì • ë‚´ìš©

#### 1. ëŒ“ê¸€ ì¢‹ì•„ìš”
**ë³€ê²½ ì „**:
```typescript
return useMutation({
  mutationFn: ({ id, likes, postId }) => commentApi.likeComment(id, likes),
  onSuccess: (_, variables) => {
    queryClient.invalidateQueries({
      queryKey: [COMMENT_QUERY_KEY, variables.postId],
      refetchType: 'all'
    })
  },
})
```

**ë³€ê²½ í›„ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸):**:
```typescript
return useMutation({
  mutationFn: ({ id, likes, postId }) => commentApi.likeComment(id, likes),
  onMutate: async (variables) => {
    await queryClient.cancelQueries({ queryKey: [COMMENT_QUERY_KEY, variables.postId] })

    queryClient.setQueryData<CommentsResponse>(
      [COMMENT_QUERY_KEY, variables.postId],
      (old) => {
        if (!old) return old

        return {
          ...old,
          comments: old.comments.map((comment) =>
            comment.id === variables.id
              ? { ...comment, likes: comment.likes + 1 }
              : comment
          ),
        }
      }
    )
  },
})
```
* ì„œë²„ ì‘ë‹µì„ ë¬´ì‹œí•˜ê³  UIë¥¼ ë¨¼ì € ê°±ì‹  (mock ë°ì´í„° í™˜ê²½ ê³ ë ¤)
* onSuccess ì œê±°

#### 2. ëŒ“ê¸€ ì¶”ê°€ / ìˆ˜ì • / ì‚­ì œ
ë³€ê²½ ì „: invalidateQueries ì‚¬ìš©
```typscript
queryClient.invalidateQueries({ queryKey: [COMMENT_QUERY_KEY, postId] })
```
ë³€ê²½ í›„: setQueryData ì‚¬ìš©, ìºì‹œ ì§ì ‘ ê°±ì‹ 
```typescript
queryClient.setQueryData<CommentsResponse>(
  [COMMENT_QUERY_KEY, postId],
  (old) => {
    if (!old) return old
    return {
      ...old,
      comments: [
        ...old.comments,
        newComment // ì¶”ê°€ ì˜ˆì‹œ
      ]
    }
  }
)
```
* ëŒ“ê¸€ ìˆ˜ì • ì‹œ: ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ idë§Œ ê°±ì‹ 
* ëŒ“ê¸€ ì‚­ì œ ì‹œ: í•´ë‹¹ id ì œê±°

âœ… ì¥ì 
UI ì¦‰ì‹œ ë°˜ì˜: ì¢‹ì•„ìš”, ëŒ“ê¸€ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ì‹œ í™”ë©´ì—ì„œ ì¦‰ì‹œ ë°˜ì˜
ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ê°ì†Œ: mock ë°ì´í„° í™˜ê²½ì—ì„œë„ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ë°˜ì˜
ì¼ê´€ëœ ìºì‹œ ê´€ë¦¬: React Query ìºì‹œë¥¼ ì§ì ‘ ê°±ì‹ í•˜ì—¬ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€

âš ï¸ ë‹¨ì  ë° ê³ ë ¤ì‚¬í•­
ì„œë²„ ìƒíƒœì™€ ìºì‹œ ë¶ˆì¼ì¹˜ ê°€ëŠ¥ì„±: ì‹¤ì œ ì„œë²„ í™˜ê²½ì—ì„œëŠ” ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± í•„ìš”
ë³µì¡ë„ ì¦ê°€: ìºì‹œ ì§ì ‘ ê°±ì‹  ë¡œì§ì´ ì¶”ê°€ë˜ì–´ ì½”ë“œ ê°€ë…ì„± ë‹¤ì†Œ ê°ì†Œ

ğŸ› ë°œìƒ ê°€ëŠ¥í•œ ì´ìŠˆ
**Issue 1: ì¢‹ì•„ìš” í´ë¦­ ì‹œ payload ì¤‘ë³µ ì¦ê°€**
ì›ì¸: ê¸°ì¡´ API í˜¸ì¶œ ì‹œ onSuccessì—ì„œ ê¸°ì¡´ likes ê°’ê³¼ ì„œë²„ ë°˜í™˜ê°’ ì¤‘ë³µ ë°˜ì˜
í•´ê²°ë°©ë²•:
ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë§Œ ì‚¬ìš©í•˜ê³  onSuccess ì œê±°
```typescript
onMutate: (variables) => {
  queryClient.setQueryData(..., ...)
}
```
**Issue 2: ëŒ“ê¸€ ì‚­ì œ í›„ UI ë°˜ì˜ë˜ì§€ ì•ŠìŒ**
ì›ì¸: invalidateQueries ì‚¬ìš© ì‹œ mock ë°ì´í„° ì¬ìš”ì²­ìœ¼ë¡œ ì‚­ì œ ë°ì´í„° ë³µì›
í•´ê²°ë°©ë²•:
setQueryDataë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚­ì œí•œ ëŒ“ê¸€ë§Œ ìºì‹œì—ì„œ ì œê±°

ğŸ” í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
 ëŒ“ê¸€ ì¶”ê°€ ì‹œ UIì— ì¦‰ì‹œ í‘œì‹œ
 ëŒ“ê¸€ ìˆ˜ì • ì‹œ UIì— ë³€ê²½ ë‚´ìš© ì¦‰ì‹œ ë°˜ì˜
 ëŒ“ê¸€ ì‚­ì œ ì‹œ UIì—ì„œ ì¦‰ì‹œ ì œê±°
 ì¢‹ì•„ìš” í´ë¦­ ì‹œ UIì—ì„œ likes ìˆ˜ ì¦‰ì‹œ ì¦ê°€
 ì„œë²„ í˜¸ì¶œì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ”ì§€ í™•ì¸

ğŸ“š ì°¸ê³  ìë£Œ
íŒŒì¼ ê²½ë¡œ:
 - src/hooks/comment.ts (10-100ì¤„)
 - src/components/comment/CommentItem.tsx (5-50ì¤„)
 - src/components/comment/CommentAddDialog.tsx (10-60ì¤„)
- React Query ë¬¸ì„œ: https://tanstack.com/query/latest

ğŸ”„ í›„ì† ì‘ì—…
 ì‹¤ì œ ì„œë²„ í™˜ê²½ì—ì„œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ì²˜ë¦¬ ë¡œì§ êµ¬í˜„
 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ë° QA ì§„í–‰



